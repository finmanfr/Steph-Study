<!DOCTYPE html>
<html>
<head>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #ffde00;
      color: #111;
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    h1 { font-size: 4rem; font-weight: 800; margin-bottom: 20px; }
    button {
      font-size: 1.3rem;
      padding: 15px 25px;
      border: none;
      border-radius: 40px;
      margin: 8px;
      background: #00ff3c;
      font-weight: 700;
      cursor: pointer;
      transition: 0.2s;
    }
    button:hover { background: #00cc2f; }
    #info {
      margin-top: 30px;
      max-width: 600px;
      font-size: 1rem;
      line-height: 1.4;
    }
  </style>

  <!-- ‚úÖ Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <!-- ‚úÖ Add jwt-decode -->
  <script src="https://cdn.jsdelivr.net/npm/jwt-decode/build/jwt-decode.min.js"></script>

  <script>
    window.onload = function () {
      // Always disable any automatic sign-in restore
      google.accounts.id.disableAutoSelect();
      google.accounts.id.revoke(); // clear stored session, force new sign-in

      google.accounts.id.initialize({
        client_id: "329250707921-o46thrivup8avr0rlbngtjnqdthrfgkr.apps.googleusercontent.com",
        callback: handleGoogleSignIn,
        auto_select: false,
        ux_mode: "popup"
      });

      // Always show prompt, even if they‚Äôve signed in before
      google.accounts.id.prompt(notification => {
        if (notification.isNotDisplayed() || notification.isSkippedMoment()) {
          console.log("Prompt not shown:", notification.getNotDisplayedReason());
        }
      });
    };

    function handleGoogleSignIn(response) {
      const data = jwt_decode(response.credential);
      const name = data.name || data.email;
      alert("Welcome, " + name + "!");
      window.location.href = "main.html";
    }
  </script>
</head>

<body>
  <h1>Steph Study üèÄ</h1>
  <p>Sign in to start studying and shooting!</p>

  <div id="g_id_onload"
    data-client_id="329250707921-o46thrivup8avr0rlbngtjnqdthrfgkr.apps.googleusercontent.com"
    data-context="signin"
    data-ux_mode="popup"
    data-callback="handleGoogleSignIn"
    data-auto_select="false">
  </div>

  <div class="g_id_signin"
    data-type="standard"
    data-shape="pill"
    data-theme="outline"
    data-text="signin_with"
    data-size="large"
    data-logo_alignment="left">
  </div>

  <div id="info"></div>
</body>
</html>
